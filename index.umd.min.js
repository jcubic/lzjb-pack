/**@license
 *
 * No Dependency fast and small LZJB Compression for Browser and Node
 *
 * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
 * Released under BSD-3-Clause License
 *
 * build: Wed, 27 Oct 2021 10:43:10 GMT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).lzjb={})}(this,(function(e){"use strict";const n="@lzjb",t=new TextEncoder("utf-8").encode(n);e.pack=function(e,{magic:n=!0}={}){const r=new Uint8Array(Math.max(1.5*e.length|0,16384)),o=function(e,n){var t,r=0,o=0,i=0,f=0,l=128,c=0,s=0,u=0,a=new Int32Array(256),h=0;for(h=0;h<256;h++)a[h]=-858993460;for(t=e.length;r<t;)if(256==(l<<=1)&&(l=1,f=o,n[o++]=0),r>t-66)n[o++]=e[r++];else if(s=r-a[u=255&(e[r]+13^e[r+1]-13^e[r+2])]&1023,a[u]=r,(i=r-s)>=0&&i!=r&&e[r]==e[i]&&e[r+1]==e[i+1]&&e[r+2]==e[i+2]){for(n[f]|=l,c=3;c<66&&e[r+c]==e[i+c];c++);n[o++]=c-3<<2|s>>8,n[o++]=s,r+=c}else n[o++]=e[r++];return console.assert(e.length>=r),o}(e,r),i=function(e){const n=Math.ceil(Math.log2(e)/8),t=new Uint8Array(n);for(let n=0;n<t.length;n++){const r=255&e;t[n]=r,e=(e-r)/256}return t}(e.length),f=[Uint8Array.of(i.length),i,r.slice(0,o)];return n&&f.unshift(t),function(...e){if(e.length>1){const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);let r=0;return e.forEach((e=>{t.set(e,r),r+=e.length})),t}if(e.length)return e[0]}(...f)},e.unpack=function(e,{magic:r=!0}={}){if(r){if(new TextDecoder("utf-8").decode(e.slice(0,t.length))!==n)throw new Error("Invalid magic value")}const o=r?t.length:0,i=o+1,f=o+e[o]+1,l=function(e){let n=0;for(let t=e.length-1;t>=0;t--)n=256*n+e[t];return n}(e.slice(i,f));e=e.slice(f);const c=new Uint8Array(l);return function(e,n,t){n|=0;for(var r=0,o=0,i=0,f=0,l=128,c=0,s=0;r<n;)if(256==(l<<=1)&&(l=1,f=e[r],r=r+1|0),f&l){for(c=3+(e[r]>>2)|0,s=1023&(e[r]<<8|e[r+1|0]),r=r+2|0,i=o-s|0;c>4;)t[o]=t[i],i=i+1|0,t[o=o+1|0]=t[i],i=i+1|0,t[o=o+1|0]=t[i],i=i+1|0,t[o=o+1|0]=t[i],o=o+1|0,i=i+1|0,c=c-4|0;for(;c>0;)t[o]=t[i],o=o+1|0,i=i+1|0,c=c-1|0}else t[o]=e[r],o=o+1|0,r=r+1|0}(e,e.length,c),c},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
